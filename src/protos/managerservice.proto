syntax = "proto3";

package managerservice;

service ManagerService{

 rpc RegisterBroker(BrokerDetails) returns (Status) {}
 rpc HealthCheck(HeartBeat) returns (HeartBeat) {}
 rpc RegisterReplica(ReplicaDetails) returns (stream Query) {}
 rpc PushUpdates(stream Query) returns (Response) {}
 rpc GetUpdates(Request) returns (stream Query) {}

}

message BrokerDetails{
 string host = 1;
 string port = 2;
 string token = 3;  // authentication
}

message Query{
    string query = 1;
}

message ReplicaDetails{
    string token = 1;
}

message Status{
 bool status = 1;
 int32 brokerId = 2;
}

message Request{}
message Response{}
message HeartBeat{}
